!function(a){if("object"==typeof a){"undefined"==typeof a.clouda&&(a.clouda={});var b=a.clouda;b.lightapp=function(a){b.lightapp.ak=a},b.STATUS={SUCCESS:0,SYSTEM_FAILURE:-3,USER_CANCELED:-2},b.RUNTIMES={WEB:0,KUANG:1,NUWA:2},function(){"undefined"!=typeof BLightApp?(b.STATUS.SUCCESS=1,b.RUNTIME=b.RUNTIMES.KUANG):b.RUNTIME=b.RUNTIMES.WEB}();var c={UNKNOW_CALLBACK:-1,UNKNOW_INPUT:-99,AK_UNDEFINED:-4,RT_GETERROR:5,EXEC_ERROR:-5,NOT_FINISH:-98,ACC_GET_ERR:6,LOC_GET_ERR:7,CAP_GET_ERR:8,CONTACT_FIND_ERR:9,GLO_ERR:10,REACH_ERR:11,MEDIA_ERR:12,CPS_ERROR:13,BTY_ERROR:14,QR_ERR:15,FS_ERR:16,BTY_ERR:17,CONNECT_ERROR:18,SCREEN_ERROR:19,FR_ERROR:20,PUSH_ERR:21,GYRO_ERR:22,MAP_ERROR:23,LOGIN_ERROR:24,PCS_ERROR:25},d={0:"成功","-1":"接口返回不符合预期","-2":"用户取消","-3":"接口的运行环境不存在。","-4":"错误，您需要在调用api前设置ak。 clouda.lightapp(your_ak_here);","-5":"执行接口出错。","-98":"接口未提供。","-99":"接口输入不符合预期。",5:"接口的运行环境准备中出错。",6:"accelerometer 接口返回错误",7:"geolocation 接口返回错误"},e=function(a,b,e){0>a&&(b=a),"object"==typeof e&&"function"==typeof e.onfail&&e.onfail(b);try{throw new Error}catch(f){var g=f.stack.split("\n"),h=d[a];if(!h)for(var i in c)if(c[i]===a){h=i+":"+a;break}console.error(h+(b?" app错误号"+b:"")+g[2].replace(/\s*/,""))}},f=function(a,b,c){return this.module=a,this.submodule=b,this.func=c,function(a){return function(){a.exec.apply(a,arguments)}}(this)};f.prototype.exec=function(){var a=arguments,d=this;j(this.module,function(e){try{d.func?e[d.submodule][d.func].apply(d,a):e[d.submodule].apply(d,a)}catch(f){var g;g=e?c.EXEC_ERROR:b.STATUS.SYSTEM_FAILURE,a.length&&"object"==typeof a[a.length-1]&&"function"==typeof a[a.length-1].onfail&&a[a.length-1].onfail(g),console.error(f.stack),d.error(g)}})},b.lightapp.error=f.prototype.error=e;var g=[];document.addEventListener("runtimeready",function(){if(b.STATUS.SUCCESS=1,b.RUNTIME=b.RUNTIMES.NUWA,g.length){for(var a=0,c=g.length;c>a;a++)j.apply(void 0,g[a]);g.length=0}});var h=0;setTimeout(function(){if(h=100,g.length){for(var a=0,b=g.length;b>a;a++)j.apply(void 0,g[a]);g.length=0}},6e3);var i={},j=function(a,d,f){if(!b.lightapp.ak)return e(c.AK_UNDEFINED),console.error("错误，'"+a+"' clouda.lightapp(your_ak_here);"),!1;if(!b.STATUS.SUCCESS&&100>h)return g.push([a,d]),void 0;if(!a)return!1;if(Array.isArray(i[a]))return i[a].push(d);if("undefined"!=typeof i[a]&&i[a])return d(i[a]);try{nuwa.pm.bindAk(b.lightapp.ak),i[a]=[],i[a].push(d),nuwa.pm.absorb(a,function(b){b.on("error",function(){throw e(c.RT_GETERROR),new Error("RT_GETERROR")}),b.on("progress",function(b){console.log(a+" percentage = "+b)}),b.on("complete",function(){for(var b=nuwa.require(a),c=0,d=i[a].length;d>c;c++)i[a][c](b);i[a]=b})})}catch(j){try{d(null)}catch(j){"object"==typeof f&&"function"==typeof f.onfail&&f.onfail(b.STATUS.SYSTEM_FAILURE),console.error(j.stack)}}return!1},k=function(a,c){var d=b[a];c.call(b.lightapp,d,b)};b.device={},b.mbaas={},b.lib={},k("lib",function(a){function b(a,c){if("undefined"==typeof a.length)throw new Error(a.length+"/"+c);var d=function(){for(var b=0;b<a.length&&0===a[b];)b+=1;for(var d=new Array(a.length-b+c),e=0;e<a.length-b;e+=1)d[e]=a[e+b];return d}(),e={};return e.getAt=function(a){return d[a]},e.getLength=function(){return d.length},e.multiply=function(a){for(var c=new Array(e.getLength()+a.getLength()-1),d=0;d<e.getLength();d+=1)for(var f=0;f<a.getLength();f+=1)c[d+f]^=h.gexp(h.glog(e.getAt(d))+h.glog(a.getAt(f)));return b(c,0)},e.mod=function(a){if(e.getLength()-a.getLength()<0)return e;for(var c=h.glog(e.getAt(0))-h.glog(a.getAt(0)),d=new Array(e.getLength()),f=0;f<e.getLength();f+=1)d[f]=e.getAt(f);for(f=0;f<a.getLength();f+=1)d[f]^=h.gexp(h.glog(a.getAt(f))+c);return b(d,0).mod(a)},e}var c=a.qrcode=function(a,c){var d=236,f=17,h=a,l=e[c],m=null,n=0,o=null,q=[],r={},s=function(a,b){n=4*h+17,m=function(a){for(var b=new Array(a),c=0;a>c;c+=1){b[c]=new Array(a);for(var d=0;a>d;d+=1)b[c][d]=null}return b}(n),t(0,0),t(n-7,0),t(0,n-7),w(),v(),y(a,b),h>=7&&x(a),null===o&&(o=B(h,l,q)),z(o,b)},t=function(a,b){for(var c=-1;7>=c;c+=1)if(!(-1>=a+c||a+c>=n))for(var d=-1;7>=d;d+=1)-1>=b+d||b+d>=n||(m[a+c][b+d]=c>=0&&6>=c&&(0===d||6===d)||d>=0&&6>=d&&(0===c||6===c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},u=function(){for(var a=0,b=0,c=0;8>c;c+=1){s(!0,c);var d=g.getLostPoint(r);(0===c||a>d)&&(a=d,b=c)}return b},v=function(){for(var a=8;n-8>a;a+=1)null===m[a][6]&&(m[a][6]=a%2===0);for(var b=8;n-8>b;b+=1)null===m[6][b]&&(m[6][b]=b%2===0)},w=function(){for(var a=g.getPatternPosition(h),b=0;b<a.length;b+=1)for(var c=0;c<a.length;c+=1){var d=a[b],e=a[c];if(null===m[d][e])for(var f=-2;2>=f;f+=1)for(var i=-2;2>=i;i+=1)m[d+f][e+i]=-2===f||2===f||-2===i||2===i||0===f&&0===i?!0:!1}},x=function(a){var b,c,d=g.getBCHTypeNumber(h);for(b=0;18>b;b+=1)c=!a&&1===(d>>b&1),m[Math.floor(b/3)][b%3+n-8-3]=c;for(b=0;18>b;b+=1)c=!a&&1===(d>>b&1),m[b%3+n-8-3][Math.floor(b/3)]=c},y=function(a,b){var c,d,e=l<<3|b,f=g.getBCHTypeInfo(e);for(c=0;15>c;c+=1)d=!a&&1===(f>>c&1),6>c?m[c][8]=d:8>c?m[c+1][8]=d:m[n-15+c][8]=d;for(c=0;15>c;c+=1)d=!a&&1===(f>>c&1),8>c?m[8][n-c-1]=d:9>c?m[8][15-c-1+1]=d:m[8][15-c-1]=d;m[n-8][8]=!a},z=function(a,b){for(var c=-1,d=n-1,e=7,f=0,h=g.getMaskFunction(b),i=n-1;i>0;i-=2)for(6===i&&(i-=1);;){for(var j=0;2>j;j+=1)if(null===m[d][i-j]){var k=!1;f<a.length&&(k=1===(a[f]>>>e&1));var l=h(d,i-j);l&&(k=!k),m[d][i-j]=k,e-=1,-1===e&&(f+=1,e=7)}if(d+=c,0>d||d>=n){d-=c,c=-c;break}}},A=function(a,c){for(var d,e=0,f=0,h=0,i=new Array(c.length),j=new Array(c.length),k=0;k<c.length;k+=1){var l=c[k].dataCount,m=c[k].totalCount-l;for(f=Math.max(f,l),h=Math.max(h,m),i[k]=new Array(l),d=0;d<i[k].length;d+=1)i[k][d]=255&a.getBuffer()[d+e];e+=l;var n=g.getErrorCorrectPolynomial(m),o=b(i[k],n.getLength()-1),p=o.mod(n);for(j[k]=new Array(n.getLength()-1),d=0;d<j[k].length;d+=1){var q=d+p.getLength()-j[k].length;j[k][d]=q>=0?p.getAt(q):0}}var r=0;for(d=0;d<c.length;d+=1)r+=c[d].totalCount;var s=new Array(r),t=0;for(d=0;f>d;d+=1)for(k=0;k<c.length;k+=1)d<i[k].length&&(s[t]=i[k][d],t+=1);for(d=0;h>d;d+=1)for(k=0;k<c.length;k+=1)d<j[k].length&&(s[t]=j[k][d],t+=1);return s},B=function(a,b,c){for(var e=i.getRSBlocks(a,b),h=j(),k=0;k<c.length;k+=1){var l=c[k];h.put(l.getMode(),4),h.put(l.getLength(),g.getLengthInBits(l.getMode(),a)),l.write(h)}var m=0;for(k=0;k<e.length;k+=1)m+=e[k].dataCount;if(h.getLengthInBits()>8*m)throw new Error("code length overflow. ("+h.getLengthInBits()+">"+8*m+")");for(h.getLengthInBits()+4<=8*m&&h.put(0,4);h.getLengthInBits()%8!==0;)h.putBit(!1);for(;;){if(h.getLengthInBits()>=8*m)break;if(h.put(d,8),h.getLengthInBits()>=8*m)break;h.put(f,8)}return A(h,e)};return r.addData=function(a){var b=k(a);q.push(b),o=null},r.isDark=function(a,b){if(0>a||a>=n||0>b||b>=n)throw new Error(a+","+b);return m[a][b]},r.getModuleCount=function(){return n},r.make=function(){s(!1,u())},r.createTableTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+b+"px;",c+='">',c+="<tbody>";for(var d=0;d<r.getModuleCount();d+=1){c+="<tr>";for(var e=0;e<r.getModuleCount();e+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+a+"px;",c+=" height: "+a+"px;",c+=" background-color: ",c+=r.isDark(d,e)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+="</tbody>",c+="</table>"},r.createImgTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c=r.getModuleCount()*a+2*b,d=b,e=c-b;return p(c,c,function(b,c){if(b>=d&&e>b&&c>=d&&e>c){var f=Math.floor((b-d)/a),g=Math.floor((c-d)/a);return r.isDark(g,f)?0:1}return 1})},r};c.stringToBytes=function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b.push(255&d)}return b},c.createStringToBytes=function(a,b){var c=function(){for(var c=n(a),d=function(){var a=c.read();if(-1===a)throw new Error;return a},e=0,f={};;){var g=c.read();if(-1===g)break;var h=d(),i=d(),j=d(),k=String.fromCharCode(g<<8|h),l=i<<8|j;f[k]=l,e+=1}if(e!==b)throw new Error(e+" !== "+b);return f}(),d="?".charCodeAt(0);return function(a){for(var b=[],e=0;e<a.length;e+=1){var f=a.charCodeAt(e);if(128>f)b.push(f);else{var g=c[a.charAt(e)];"number"==typeof g?(255&g)===g?b.push(g):(b.push(g>>>8),b.push(255&g)):b.push(d)}}return b}};var d={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},e={L:1,M:0,Q:3,H:2},f={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},g=function(){var a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],c=1335,e=7973,g=21522,i={},j=function(a){for(var b=0;0!==a;)b+=1,a>>>=1;return b};return i.getBCHTypeInfo=function(a){for(var b=a<<10;j(b)-j(c)>=0;)b^=c<<j(b)-j(c);return(a<<10|b)^g},i.getBCHTypeNumber=function(a){for(var b=a<<12;j(b)-j(e)>=0;)b^=e<<j(b)-j(e);return a<<12|b},i.getPatternPosition=function(b){return a[b-1]},i.getMaskFunction=function(a){switch(a){case f.PATTERN000:return function(a,b){return(a+b)%2===0};case f.PATTERN001:return function(a){return a%2===0};case f.PATTERN010:return function(a,b){return b%3===0};case f.PATTERN011:return function(a,b){return(a+b)%3===0};case f.PATTERN100:return function(a,b){return(Math.floor(a/2)+Math.floor(b/3))%2===0};case f.PATTERN101:return function(a,b){return a*b%2+a*b%3===0};case f.PATTERN110:return function(a,b){return(a*b%2+a*b%3)%2===0};case f.PATTERN111:return function(a,b){return(a*b%3+(a+b)%2)%2===0};default:throw new Error("bad maskPattern:"+a)}},i.getErrorCorrectPolynomial=function(a){for(var c=b([1],0),d=0;a>d;d+=1)c=c.multiply(b([1,h.gexp(d)],0));return c},i.getLengthInBits=function(a,b){if(b>=1&&10>b)switch(a){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},i.getLostPoint=function(a){var b,c,d,e,f=a.getModuleCount(),g=0;for(b=0;f>b;b+=1)for(c=0;f>c;c+=1){var h=0,i=a.isDark(b,c);for(d=-1;1>=d;d+=1)if(!(0>b+d||b+d>=f))for(e=-1;1>=e;e+=1)0>c+e||c+e>=f||(0!==d||0!==e)&&i===a.isDark(b+d,c+e)&&(h+=1);h>5&&(g+=3+h-5)}for(b=0;f-1>b;b+=1)for(c=0;f-1>c;c+=1){var j=0;a.isDark(b,c)&&(j+=1),a.isDark(b+1,c)&&(j+=1),a.isDark(b,c+1)&&(j+=1),a.isDark(b+1,c+1)&&(j+=1),(0===j||4===j)&&(g+=3)}for(b=0;f>b;b+=1)for(c=0;f-6>c;c+=1)a.isDark(b,c)&&!a.isDark(b,c+1)&&a.isDark(b,c+2)&&a.isDark(b,c+3)&&a.isDark(b,c+4)&&!a.isDark(b,c+5)&&a.isDark(b,c+6)&&(g+=40);for(c=0;f>c;c+=1)for(b=0;f-6>b;b+=1)a.isDark(b,c)&&!a.isDark(b+1,c)&&a.isDark(b+2,c)&&a.isDark(b+3,c)&&a.isDark(b+4,c)&&!a.isDark(b+5,c)&&a.isDark(b+6,c)&&(g+=40);var k=0;for(c=0;f>c;c+=1)for(b=0;f>b;b+=1)a.isDark(b,c)&&(k+=1);var l=Math.abs(100*k/f/f-50)/5;return g+=10*l},i}(),h=function(){for(var a=new Array(256),b=new Array(256),c=0;8>c;c+=1)a[c]=1<<c;for(c=8;256>c;c+=1)a[c]=a[c-4]^a[c-5]^a[c-6]^a[c-8];for(c=0;255>c;c+=1)b[a[c]]=c;var d={};return d.glog=function(a){if(1>a)throw new Error("glog("+a+")");return b[a]},d.gexp=function(b){for(;0>b;)b+=255;for(;b>=256;)b-=255;return a[b]},d}(),i=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],b=function(a,b){var c={};return c.totalCount=a,c.dataCount=b,c},c={},d=function(b,c){switch(c){case e.L:return a[4*(b-1)+0];case e.M:return a[4*(b-1)+1];case e.Q:return a[4*(b-1)+2];case e.H:return a[4*(b-1)+3];default:return void 0}};return c.getRSBlocks=function(a,c){var e=d(a,c);if("undefined"==typeof e)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var f=e.length/3,g=[],h=0;f>h;h+=1)for(var i=e[3*h+0],j=e[3*h+1],k=e[3*h+2],l=0;i>l;l+=1)g.push(b(j,k));return g},c}(),j=function(){var a=[],b=0,c={};return c.getBuffer=function(){return a},c.getAt=function(b){var c=Math.floor(b/8);return 1===(a[c]>>>7-b%8&1)},c.put=function(a,b){for(var d=0;b>d;d+=1)c.putBit(1===(a>>>b-d-1&1))},c.getLengthInBits=function(){return b},c.putBit=function(c){var d=Math.floor(b/8);a.length<=d&&a.push(0),c&&(a[d]|=128>>>b%8),b+=1},c},k=function(a){var b=d.MODE_8BIT_BYTE,e=c.stringToBytes(a),f={};return f.getMode=function(){return b},f.getLength=function(){return e.length},f.write=function(a){for(var b=0;b<e.length;b+=1)a.put(e[b],8)},f},l=function(){var a=[],b={};return b.writeByte=function(b){a.push(255&b)},b.writeShort=function(a){b.writeByte(a),b.writeByte(a>>>8)},b.writeBytes=function(a,c,d){c=c||0,d=d||a.length;for(var e=0;d>e;e+=1)b.writeByte(a[e+c])},b.writeString=function(a){for(var c=0;c<a.length;c+=1)b.writeByte(a.charCodeAt(c))},b.toByteArray=function(){return a},b.toString=function(){var b="";b+="[";for(var c=0;c<a.length;c+=1)c>0&&(b+=","),b+=a[c];return b+="]"},b},m=function(){var a=0,b=0,c=0,d="",e={},f=function(a){d+=String.fromCharCode(g(63&a))},g=function(a){if(0>a);else{if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);if(62===a)return 43;if(63===a)return 47}throw new Error("n:"+a)};return e.writeByte=function(d){for(a=a<<8|255&d,b+=8,c+=1;b>=6;)f(a>>>b-6),b-=6},e.flush=function(){if(b>0&&(f(a<<6-b),a=0,b=0),c%3!==0)for(var e=3-c%3,g=0;e>g;g+=1)d+="="},e.toString=function(){return d},e},n=function(a){var b=a,c=0,d=0,e=0,f={};f.read=function(){for(;8>e;){if(c>=b.length){if(0===e)return-1;throw new Error("unexpected end of file./"+e)}var a=b.charAt(c);if(c+=1,"="===a)return e=0,-1;a.match(/^\s$/)||(d=d<<6|g(a.charCodeAt(0)),e+=6)}var f=d>>>e-8&255;return e-=8,f};var g=function(a){if(a>=65&&90>=a)return a-65;if(a>=97&&122>=a)return a-97+26;if(a>=48&&57>=a)return a-48+52;if(43===a)return 62;if(47===a)return 63;throw new Error("c:"+a)};return f},o=function(a,b){var c=a,d=b,e=new Array(a*b),f={};f.setPixel=function(a,b,d){e[b*c+a]=d},f.write=function(a){a.writeString("GIF87a"),a.writeShort(c),a.writeShort(d),a.writeByte(128),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(255),a.writeByte(255),a.writeByte(255),a.writeString(","),a.writeShort(0),a.writeShort(0),a.writeShort(c),a.writeShort(d),a.writeByte(0);var b=2,e=h(b);a.writeByte(b);for(var f=0;e.length-f>255;)a.writeByte(255),a.writeBytes(e,f,255),f+=255;a.writeByte(e.length-f),a.writeBytes(e,f,e.length-f),a.writeByte(0),a.writeString(";")};var g=function(a){var b=a,c=0,d=0,e={};return e.write=function(a,e){if(a>>>e!==0)throw new Error("length over");for(;c+e>=8;)b.writeByte(255&(a<<c|d)),e-=8-c,a>>>=8-c,d=0,c=0;d=a<<c|d,c+=e},e.flush=function(){c>0&&b.writeByte(d)},e},h=function(a){for(var b=1<<a,c=(1<<a)+1,d=a+1,f=i(),h=0;b>h;h+=1)f.add(String.fromCharCode(h));f.add(String.fromCharCode(b)),f.add(String.fromCharCode(c));var j=l(),k=g(j);k.write(b,d);var m=0,n=String.fromCharCode(e[m]);for(m+=1;m<e.length;){var o=String.fromCharCode(e[m]);m+=1,f.contains(n+o)?n+=o:(k.write(f.indexOf(n),d),f.size()<4095&&(f.size()===1<<d&&(d+=1),f.add(n+o)),n=o)}return k.write(f.indexOf(n),d),k.write(c,d),k.flush(),j.toByteArray()},i=function(){var a={},b=0,c={};return c.add=function(d){if(c.contains(d))throw new Error("dup key:"+d);a[d]=b,b+=1},c.size=function(){return b},c.indexOf=function(b){return a[b]},c.contains=function(b){return"undefined"!=typeof a[b]},c};return f},p=function(a,b,c){for(var d=o(a,b),e=0;b>e;e+=1)for(var f=0;a>f;f+=1)d.setPixel(f,e,c(f,e));var g=l();d.write(g);for(var h=m(),i=g.toByteArray(),j=0;j<i.length;j+=1)h.writeByte(i[j]);return h.flush(),h}}),k("device",function(a){var b=this,d=a.accelerometer={},e=new f("device","accelerometer","getCurrentAcceleration"),g=(new f("device","accelerometer","watchAcceleration"),new f("device","accelerometer","clearWatch"));d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.x&&"undefined"!=typeof d.y&&"undefined"!=typeof d.z?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)};var h;return d.startListen=function(a){h&&g(h),j("device",function(d){h=d.accelerometer.watchAcceleration(function(d){"object"==typeof d&&"undefined"!=typeof d.x&&"undefined"!=typeof d.y&&"undefined"!=typeof d.z?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)})},d.stopListen=function(){g(h)},d}),k("device",function(a){var b=this,d=a.battery={},e=new f("device","batterystatus","start"),g=new f("device","batterystatus","stop");return d.get=function(a){e(function(){a.onsuccess.apply(this,arguments),g(function(){},function(){})},function(d){b.error(c.BTY_ERR,d,a)},a)},d.startListen=function(a){e(a.onsuccess,function(d){b.error(c.BTY_ERR,d,a)},a)},d.stopListen=function(a){"undefined"==typeof a?g(function(){},function(){}):g(a.onsuccess,function(d){b.error(c.BTY_ERR,d,a)},a)},d}),k("device",function(a){var b=this,d=a.compass={},e=new f("device","compass","getCurrentHeading"),g=(new f("device","compass","watchHeading"),new f("device","compass","clearWatch"));d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.magneticHeading&&"undefined"!=typeof d.trueHeading?a.onsuccess.apply(this,arguments):b.error(c.CPS_ERROR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.CPS_ERROR,d,a)},a)};var h;return d.startListen=function(a){h&&g(h),j("device",function(d){h=d.compass.watchHeading(function(d){"object"==typeof d&&"undefined"!=typeof d.magneticHeading&&"undefined"!=typeof d.trueHeading?a.onsuccess.apply(this,arguments):b.error(c.CPS_ERROR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.CPS_ERROR,d,a)})})},d.stopListen=function(){g(h)},d}),k("device",function(a){var d=this,e=a.connection={};a.CONNECTION_STATUS={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"},e.status=a.CONNECTION_STATUS.UNKNOWN;var g=new f("device","connection","getInfo");e.get=function(f){return b.RUNTIME===b.RUNTIMES.KUANG?(BLightApp.getNetworkType("("+f.onsuccess.toString()+")","("+f.onfail.toString()+")"),!1):e.status!==a.CONNECTION_STATUS.UNKNOWN?(f.onsuccess(e.status),void 0):(g(function(a){e.status=a,f.onsuccess.call(this,a),delete f.onsuccess},function(a){d.error(c.CONNECT_ERROR,a,f)},f),void 0)};var h=null;return e.startListen=function(a){h=a.onsuccess,g(function(a){e.status=a,"function"==typeof h&&h.call(void 0,a),h(a)},function(b){d.error(c.CONNECT_ERROR,b,a)},a)},e.stopListen=function(){h=null},a}),k("device",function(a){{var d=this,e=a.contact={};new f("device","contact","create"),new f("device","contact","find"),new f("device","contact","findBounds")}e.find=function(a,b){j("device",function(e){e.contact.find(a,function(a){Array.isArray(a)?b.onsuccess.apply(this,arguments):d.error(c.CONTACT_FIND_ERR,c.UNKNOW_CALLBACK,b)},function(a){d.error(c.CONTACT_FIND_ERR,a,b)},b)})},e.insert=function(a,b){j("device",function(e){var f=e.contact.create();for(var g in a)f[g]=a[g];f.save(function(){b.onsuccess.apply(this,arguments)},function(a){d.error(c.CONTACT_FIND_ERR,a,b)})})},e.update=function(a,b,e){j("device",function(){if("object"==typeof a){for(var f in b)a[f]=b[f];b.displayName&&a.name&&(a.name.familyName=b.displayName.substring(0,1),a.name.givenName=b.displayName.substring(1)),a.id&&(a.rawId=a.id),a.save(function(){e.onsuccess.apply(this,arguments)},function(a){d.error(c.CONTACT_FIND_ERR,a,e)})}else d.error(c.CONTACT_FIND_ERR,c.UNKNOW_CALLBACK,e)})},e.remove=function(a,e){j("device",function(){try{"object"==typeof a?a.remove(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.CONTACT_FIND_ERR,a,e)}):e.onsuccess(b.STATUS.SUCCESS)}catch(f){console.log(f.stack)}})},e.count=function(a){j("device",function(b){b.contact.findBounds(["*"],function(b){a.onsuccess(b.count),b.close(function(){},function(){})},function(b){d.error(c.CONTACT_FIND_ERR,b,a)},a)})},e.getCursor=function(a,b,e,f){j("device",function(g){g.contact.findBounds(a,function(a){a.get(b,function(b){f.onsuccess(b),a.close(function(){},function(){})},function(a){d.error(c.CONTACT_FIND_ERR,a,f)},e)},function(a){d.error(c.CONTACT_FIND_ERR,a,f)},f)})}}),k("device",function(a){var d=this,e=a.device={},g=new f("device","getUuid");return e.getUuid=function(a){return b.RUNTIME===b.RUNTIMES.KUANG?(BLightApp.getDeviceInfo("("+a.onsuccess.toString()+")","("+a.onfail.toString()+")"),!1):(g(a.onsuccess,function(b){d.error(c.BTY_ERR,b,a)},a),void 0)},e}),k("device",function(a){var b=this,d=a.fs={},e=function(a){j("device",function(c){c.fs.requestFileSystem(c.fs.LocalFileSystem.PERSISTENT,1e8,function(c){c.root.getDirectory(b.ak,{create:!0,exclusive:!1},function(b){a(b)},function(){a(null)})},function(){a(null)})})},f=function(a){return a.substring(a.lastIndexOf("/")+1)},g=null;return d.post=function(a,d,e){j("filetransfer",function(h){null===g&&(g=new h.FileTransfer),e.onprogress&&(g.onprogress=function(a){e.onprogress(a)});var i=new h.FileUploadOptions;i.fileKey=e.uploadKey,i.fileName=f(a),g.upload(a,d,function(){e.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,e)},i,e)})},d.download=function(a,d,f){j("filetransfer",function(h){null===g&&(g=new h.FileTransfer),f.onprogress&&(g.onprogress=function(a){f.onprogress(a)}),e(function(e){return e?(g.download(a,e.fullPath+"/"+d,function(){f.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,f)},f),void 0):(b.error(c.FS_ERR,err,f),void 0)})})},d.abort=function(){null===g?b.error(c.FS_ERR,err,options):g.abort()},d.remove=function(a,d){j("device",function(e){var g=new e.fs.FileEntry(f(a),a);g.remove(function(){d.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,d)},d)})},d.empty=function(a){j("device",function(){e(function(d){var e=d;e.removeRecursively(function(){a.onsuccess.apply(this,arguments)},function(d){b.error(c.FS_ERR,d,a)},a)})})},d.count=function(a){j("device",function(){e(function(d){var e=d,f=e.createReader();f.readEntries(function(b){a.onsuccess.call(this,b.length)},function(d){b.error(c.FS_ERR,d,a)},a)})})},d.getInfo=function(a,d){j("device",function(e){var g=new e.fs.FileEntry(f(a),a);g.file(function(a){d.onsuccess(a)},function(){b.error(c.FS_ERR,c.UNKNOW_CALLBACK,d)})},d)},d.getInfoByOffset=function(a,d){j("device",function(){e(function(e){var f=e,g=f.createReader();g.readEntries(function(e){return a>=e.length?(b.error(c.FS_ERR,c.UNKNOW_CALLBACK,d),void 0):(fileEntry.file(function(a){d.onsuccess(a)},function(){b.error(c.FS_ERR,c.UNKNOW_CALLBACK,d)}),void 0)},function(a){b.error(c.FS_ERR,a,d)},d)})},d)},a}),k("device",function(a){var d=this,e=a.geolocation={};a.LOCATION_METHOD={BASE_STATION:0,GPS:1};var g=new f("device","geolocation","getCurrentPosition"),h=(new f("device","geolocation","watchPosition"),new f("device","geolocation","clearWatch"));e.get=function(e){return b.RUNTIME===b.RUNTIMES.KUANG?(BLightApp.getCurrentPosition("("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"),!1):(e.enableHighAccuracy=e.method===a.LOCATION_METHOD.BASE_STATION?!1:!0,g(function(a){"object"==typeof a&&"undefined"!=typeof a.latitude&&"undefined"!=typeof a.longitude?e.onsuccess.apply(this,arguments):d.error(c.LOC_GET_ERR,c.UNKNOW_CALLBACK,e)},function(a){d.error(c.LOC_GET_ERR,a,e)},e),void 0)};var i;return e.startListen=function(b){i&&h(i),j("device",function(e){b.enableHighAccuracy=b.method===a.LOCATION_METHOD?!1:!0,i=e.geolocation.watchPosition(function(){"object"==typeof obj&&"undefined"!=typeof obj.latitude&&"undefined"!=typeof obj.longitude?b.onsuccess.apply(this,arguments):d.error(c.LOC_GET_ERR,c.UNKNOW_CALLBACK,b)},function(a){d.error(c.LOC_GET_ERR,a,b)},b)})},e.stopListen=function(){h(i)},a}),k("device",function(a){for(var b=this,d=a.globalization={},e=["dateToString","getCurrencyPattern","getDateNames","getDatePattern","getFirstDayOfWeek","getLocaleName","getNumberPattern","getPreferredLanguage","isDayLightSavingsTime","numberToString","stringToDate","stringToNumber"],g={},h=0,i=e.length;i>h;h++)g[e[h]]=new f("device","globalization",e[h]);return d.getPreferredLanguage=function(a){g.getPreferredLanguage(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getLocaleName=function(a){g.getLocaleName(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.dateToString=function(a,d){g.dateToString(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.stringToDate=function(a,d){g.stringToDate(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getDatePattern=function(a){g.getDatePattern(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getDateNames=function(a){g.getDateNames(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.isDayLightSavingsTime=function(a,d){g.isDayLightSavingsTime(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getFirstDayOfWeek=function(a){g.getFirstDayOfWeek(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.numberToString=function(a,d){g.numberToString(d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.stringToNumber=function(a,d){g.stringToNumber(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getNumberPattern=function(a){g.getNumberPattern(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getCurrencyPattern=function(a,d){g.getCurrencyPattern(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},a}),k("device",function(a){var b=this,d=a.gyro={},e=new f("device","orientation","getCurrentDeviceOrientation"),g=new f("device","orientation","clearWatch");d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.alpha&&"undefined"!=typeof d.beta&&"undefined"!=typeof d.gamma?a.onsuccess.apply(this,arguments):b.error(c.GYRO_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.GYRO_ERR,d,a)},a)};var h;return d.startListen=function(a){h&&g(h),j("device",function(d){h=d.orientation.watchDeviceOrientation(function(d){"object"==typeof d&&"undefined"!=typeof d.alpha&&"undefined"!=typeof d.beta&&"undefined"!=typeof d.gamma?a.onsuccess.apply(this,arguments):b.error(c.GYRO_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.GYRO_ERR,d,a)},a)})},d.stopListen=function(){g(h)},d}),k("device",function(c){var d=c.localStorage={};d.set=function(c,d,e){try{a.localStorage.setItem(c,d),e.onsuccess(b.STATUS.SUCCESS)}catch(f){console.log(f.stack),e.onfail(b.STATUS.SYSTEM_FAILURE)}},d.get=function(c,d){try{d.onsuccess(a.localStorage.getItem(c))}catch(e){console.log(e.stack),d.onfail(b.STATUS.SYSTEM_FAILURE)}},d.remove=function(c,d){try{a.localStorage.removeItem(c),d.onsuccess(b.STATUS.SUCCESS)}catch(e){console.log(e.stack),d.onfail(b.STATUS.SYSTEM_FAILURE)}},d.count=function(c){try{c.onsuccess(a.localStorage.length)}catch(d){console.log(d.stack),c.onfail(b.STATUS.SYSTEM_FAILURE)}},d.empty=function(c){try{a.localStorage.clear(),c.onsuccess(b.STATUS.SUCCESS)}catch(d){console.log(d.stack),c.onfail(b.STATUS.SYSTEM_FAILURE)}}}),k("device",function(a){var d=this,e=a.media={};a.MEDIA_DESTINATION={},a.MEDIA_ENCODEING={},a.MEDIA_TYPE={},a.MEDIA_SOURCE={},a.MEDIA_DIRECTION={},a.MEDIA_DESTINATION.DATA_URL=0,a.MEDIA_DESTINATION.FILE_URI=1,a.MEDIA_DESTINATION.NATIVE_URI=2,a.MEDIA_ENCODEING.JPEG=0,a.MEDIA_ENCODEING.PNG=1,a.MEDIA_TYPE.PICTURE=0,a.MEDIA_TYPE.VIDEO=1,a.MEDIA_TYPE.ALLMEDIA=2,a.MEDIA_TYPE.AUDIO=3,a.MEDIA_SOURCE.ALBUM=1,a.MEDIA_SOURCE.CAMERA=0,a.MEDIA_DIRECTION.BACK=0,a.MEDIA_DIRECTION.FRONT=1,a.MEDIA_FORMAT={FILE:0,BASE64:1},a.MEDIA_STATUS={NONE:0,STARTING:1,RUNNING:2,PAUSED:3,STOPPED:4};var g=new f("device","camera","getPicture"),h=new f("device","capture","captureAudio"),i=new f("device","capture","captureImage"),k=new f("device","capture","captureVideo");e.captureMedia=function(e){if(b.RUNTIME===b.RUNTIMES.KUANG)return e.source||(e.source=b.device.MEDIA_SOURCE.CAMERA),e.mediaType==b.device.MEDIA_TYPE.AUDIO?d.error(c.NOT_FINISH,c.NOT_FINISH,e):e.source==b.device.MEDIA_SOURCE.CAMERA?e.mediaType==b.device.MEDIA_TYPE.IMAGE?BLightApp.cloudaLaunchCamera("lightapp.device.MEDIA_TYPE.IMAGE","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"):e.mediaType==b.device.MEDIA_TYPE.VIDEO&&BLightApp.cloudaLaunchCamera("lightapp.device.MEDIA_TYPE.VIDEO","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"):e.source==b.device.MEDIA_SOURCE.ALBUM?e.mediaType==b.device.MEDIA_TYPE.IMAGE?BLightApp.cloudaLaunchGallery("lightapp.device.MEDIA_TYPE.IMAGE","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"):e.mediaType==b.device.MEDIA_TYPE.VIDEO&&BLightApp.cloudaLaunchGallery("lightapp.device.MEDIA_TYPE.VIDEO","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"):d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),!1;var f;e.mediaType==b.device.MEDIA_TYPE.VIDEO?f=k:e.mediaType==b.device.MEDIA_TYPE.AUDIO?f=h:e.format===a.MEDIA_FORMAT.BASE64?f=g:e.source===b.device.MEDIA_SOURCE.ALBUM?(e.format===a.MEDIA_FORMAT.FILE&&(e.destType=a.MEDIA_DESTINATION.FILE_URI),f=g,e.sourceType=a.MEDIA_SOURCE.ALBUM):f=i,j("device",function(b){f(function(c){if(Array.isArray(c))if(1==c.length&&e.details){var d=0;c[d].getFormatData(function(a){c[d].width=a.width,c[d].height=a.height,c[d].duration=a.duration,e.onsuccess(c[0])},function(){})}else e.onsuccess(c);else if(e.format===a.MEDIA_FORMAT.FILE){var f=new b.fs.MediaFile("tmpfile",c);e.onsuccess(f)}else e.onsuccess(c)},function(a){d.error(c.MEDIA_ERR,a,e)},e)},e)};var l={};return e.operateMedia=function(a,e,f){if(b.RUNTIME===b.RUNTIMES.KUANG){switch(e){case"startRecord":BLightApp.startRecording(a,"("+f.onsuccess.toString()+")","("+f.onfail.toString()+")");break;case"stopRecord":BLightApp.stopRecording("("+f.onsuccess.toString()+")","("+f.onfail.toString()+")");break;case"play":BLightApp.playAudio(a,"lightapp.device.AUDIO_TYPE.PLAY","("+f.onsuccess.toString()+")","("+f.onfail.toString()+")");break;case"stop":BLightApp.playAudio(a,"lightapp.device.AUDIO_TYPE.STOP","("+f.onsuccess.toString()+")","("+f.onfail.toString()+")");break;default:d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,f)}return!1}j("device",function(g){switch(l[a]||(l[a]=new g.Media(a,function(){},function(a){d.error(c.MEDIA_ERR,a.code,f)},f.onstatus)),e){case"getCurrentPosition":l[a][e].call(l[a],f.onsuccess,f.onfail);break;case"getDuration":var h=l[a][e]();h>-1?f.onsuccess(h):f.onfail(h);break;case"seekTo":l[a][e](f.time),f.onsuccess(b.STATUS.SUCCESS);break;case"setVolume":l[a][e](f.volume),f.onsuccess(b.STATUS.SUCCESS);break;case"play":case"pause":case"startRecord":case"stopRecord":case"stop":l[a][e](),f.onsuccess(b.STATUS.SUCCESS);break;case"release":l[a][e](),f.onsuccess(b.STATUS.SUCCESS),delete l[a]}},f)},a}),k("device",function(a){var c=a.notification={},d=new f("device","notification","alert"),e=new f("device","notification","confirm"),g=new f("device","notification","prompt"),h=new f("device","notification","beep"),i=new f("device","notification","vibrate"),j=new f("device","notification","activityStart"),k=new f("device","notification","activityStop"),l=new f("device","notification","progressStart"),m=new f("device","notification","progressValue"),n=new f("device","notification","progressStop");
return c.alert=function(a,b){return"object"==typeof b?d(a,b.onsuccess,b.title,b.buttonName,b):d(a)},c.confirm=function(a,c){c.buttonLabels&&c.buttonLabels.length>2&&(c.buttonLabels.length=2),e.call(this,a,function(a){2===a?c.onfail(b.STATUS.USER_CANCELED):c.onsuccess(b.STATUS.SUCCESS)},c.title,c.buttonLabels,c)},c.beep=function(a){h(a)},c.vibrate=function(a){i(a)},c.prompt=function(a,c){c.buttonLabels&&c.buttonLabels.length>2&&(c.buttonLabels.length=2),g.call(this,a,function(a){2===a?c.onfail(b.STATUS.USER_CANCELED):c.onsuccess(b.STATUS.SUCCESS)},c.title,c.buttonLabels,c.defaultText,c)},c.startLoad=function(a,b,c){j(a,b,c)},c.stopLoad=function(a){k(a)},c.startProgress=function(a,b){l(a,b)},c.updateProgress=function(a){m(a)},c.stopProgress=function(){n()},a}),k("device",function(a){{var d=this,e=a.qr={},g=new f("barcode","identifyQRcode"),h=new f("barcode","identifyBarcode");new f("barcode","createQRcode")}a.QR_TYPE={QRCODE:1,BARCODE:2},e.startCapture=function(e){return b.RUNTIME===b.RUNTIMES.KUANG?(e.type==b.device.QR_TYPE.QRCODE?BLightApp.startQRcode("lightapp.device.QR_TYPE.QRCODE","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"):e.type==b.device.QR_TYPE.BARCODE&&BLightApp.startQRcode("lightapp.device.QR_TYPE.BARCODE","("+e.onsuccess.toString()+")","("+e.onfail.toString()+")"),void 0):(e.type===a.QR_TYPE.BARCODE?h(function(a){"string"==typeof a?e.onsuccess.apply(this,arguments):d.error(c.QR_ERR,c.UNKNOW_CALLBACK,e)},function(a){d.error(c.QR_ERR,a,e)},e):g(function(a){"string"==typeof a?e.onsuccess.apply(this,arguments):d.error(c.QR_ERR,c.UNKNOW_CALLBACK,e)},function(a){d.error(c.QR_ERR,a,e)},e),void 0)};var i={};i.BLACK=0,i.COLOR=1,i.DYNAMIC=2;var k={};k.GIF="gif",k.JPEG="jpeg",e.generate=function(a,e){if(e.offline)if(a.length>255)d.error(c.QR_ERR,999,e);else try{for(var f=a.length,g=1;9>g&&!(1>f/2);g++)f/=2;var h=b.lib.qrcode(g+2,"M");h.addData(a),h.make(),e.onsuccess(h.createImgTag())}catch(l){d.error(c.QR_ERR,998,e)}else e.animate?(e.destType=k.GIF,e.type=i.DYNAMIC):e.destType=k.JPEG,e.destType===k.JPEG&&(e.type=e.mono===!1?i.COLOR:i.BLACK),j("barcode",function(b){var f=new b.QRcodeOptions(e.type,e.destType,e.backgroundUrl||"");b.createQRcode(function(a){e.onsuccess(a)},function(a){d.error(c.QR_ERR,a,e)},a,f)})}}),k("device",function(a){var d=this,e=a.screen={},g=new f("device","sharescreenshot","takeScreenshot"),h=new f("device","sharescreenshot","sharePicture"),i=new f("device","sharescreenshot","shareScreenshot");e.captureScreen=function(a){g(function(b){a.onsuccess(b)},function(b){d.error(c.SCREEN_ERROR,b,a)})},e.shareImage=function(a,e){h(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.SCREEN_ERROR,a,e)},a)},e.shareScreen=function(a){i(function(){a.onsuccess(b.STATUS.SUCCESS)},function(b){d.error(c.SCREEN_ERROR,b,a)})}}),k("touch",function(b,c){var d=d||{};!function(b,c){"use strict";function d(a){if(A){for(var b=[],c=null,d=0,e=a.touches.length;e>d;d++)c=a.touches[d],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]}function e(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}function f(a){return a.touches?a.touches.length:1}function g(a,b){if(a.length>=2&&b.length>=2){var c=e(a[1],a[0]),d=e(b[1],b[0]);return d/c}return 1}function h(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function i(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c}function j(a){var b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(var c in b)if(b[c])return c;return null}function k(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}}function l(){E=F=G=null,N=L=H=I=!1,J=!1,C={},P=!1}function m(a){return"touchmove"===a.type||"mousemove"===a.type}function n(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type}function o(){var a=A?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout";X(b,"DOMContentLoaded",function(){var c=b.body;X(c,a,W)})}var p=function(){var b=a.navigator,c=b.userAgent,d=c.match(/(Android)[\s\/]+([\d\.]+)/),e=c.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),f=c.match(/(Windows\s+Phone)\s([\d\.]+)/),g=/WebKit\/[\d.]+/i.test(c),h=e?b.standalone?g:/Safari/i.test(c)&&!/CriOS/i.test(c)&&!/MQQBrowser/i.test(c):!1,i={};return d&&(i.android=!0,i.version=d[2]),e&&(i.ios=!0,i.version=e[2].replace(/_/g,"."),i.ios7=/^7/.test(i.version),"iPad"===e[1]?i.ipad=!0:"iPhone"===e[1]?(i.iphone=!0,i.iphone5=568==screen.height):"iPod"===e[1]&&(i.ipod=!0)),f&&(i.wp=!0,i.version=f[2],i.wp8=/^8/.test(i.version)),g&&(i.webkit=!0),h&&(i.safari=!0),i}(),q={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},r={getType:function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},getSelector:function(a){if(a.id)return"#"+a.id;if(a.className){var b=a.className.split(/\s+/);return"."+b.join(".")}return a.tagName.toLowerCase()},matchSelector:function(a,b){return a.webkitMatchesSelector(b)},getEventListeners:function(a){return a.listeners},getPCevts:function(a){return q[a]||a},forceReflow:function(){var a=document.getElementById("domTreeOp");a||(a=document.createElement("div"),a.id="domTreeOp",document.body.appendChild(a));var b=a.parentNode,c=a.nextSibling;b.removeChild(a),b.insertBefore(a,c)}},s=0,t=[],u=function(a,b,c){c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};try{"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))}catch(f){console.error("touch not support")}},v=function(a,b,c){a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(c):a.listeners[b]=[c];var d=function(a){p.ios7&&r.forceReflow(),a.originEvent=a,a.startRotate=function(){P=!0};for(var b in a.detail)"type"!==b&&(a[b]=a.detail[b]);c.call(a.target,a)};c.proxy=c.proxy||{},c.proxy[b]?c.proxy[b].push(s++):c.proxy[b]=[s++],t.push(d),a.addEventListener&&a.addEventListener(b,d,!1)},w=function(a,b,c){if(c){var d=c.proxy[b];d&&d.length&&d.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,t[c],!1)})}else{var e=a.listeners[b];e&&e.length&&e.forEach(function(c){a.removeEventListener(b,c,!1)})}},x=function(a,b,c,d){var e=function(b){var e;b.originEvent=b,b.startRotate=function(){P=!0};for(var f in b.detail)"type"!==f&&(b[f]=b.detail[f]);var g=r.getSelector(a)+" "+c,h=r.matchSelector(b.target,g),i=r.matchSelector(b.target,g+" "+b.target.nodeName);if(!h&&i){for(p.ios7&&r.forceReflow(),e=b.target;!r.matchSelector(e,g);)e=e.parentNode;d.call(e,b)}else p.ios7&&r.forceReflow(),(h||i)&&d.call(b.target,b)};d.proxy=d.proxy||{},d.proxy[b]?d.proxy[b].push(s++):d.proxy[b]=[s++],t.push(e),a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(e):a.listeners[b]=[e],a.addEventListener&&a.addEventListener(b,e,!1)},y=function(a,b,c,d){if(d){var e=d.proxy[b];e.length&&e.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,t[c],!1)})}else{var f=a.listeners[b];f.forEach(function(c){a.removeEventListener(b,c,!1)})}},z={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},A="ontouchstart"in a,B={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},C={start:null,move:null,end:null},D=0,E=null,F=null,G=null,H=!1,I=!1,J=!1,K={},L=!1,M=null,N=!1,O=1,P=!1,Q=[],R=0,S=0,T=0,U=null,V={_getAngleDiff:function(a){for(var b=parseInt(R-i(a[0],a[1]),10),c=0;Math.abs(b-S)>90&&c++<50;)0>S?b-=180:b+=180;return S=parseInt(b,10)},pinch:function(a){var b=a.target;if(z.pinch){if(!L)return;if(f(a)<2&&!n(a))return;var c=g(C.start,C.move),d=this._getAngleDiff(C.move),e={type:"",originEvent:a,scale:c,rotation:d,direction:d>0?"right":"left",fingersCount:f(a)};if(I?m(a)?e.fingerStatus="move":n(a)&&(e.fingerStatus="end",u(b,B.PINCH_END,e),l()):(I=!0,e.fingerStatus="start",u(b,B.PINCH_START,e)),u(b,B.PINCH,e),Math.abs(1-c)>z.minScaleRate){var h=_utils.deepCopy(e),i=1e-11;c>O?(O=c-i,u(b,B.PINCH_OUT,h,!1)):O>c&&(O=c+i,u(b,B.PINCH_IN,h,!1)),n(a)&&(O=1)}if(Math.abs(d)>z.minRotationAngle){var j,k=_utils.deepCopy(e);j=d>0?B.ROTATION_RIGHT:B.ROTATION_LEFT,u(b,j,k,!1),u(b,B.ROTATION,e)}}},rotateSingleFinger:function(a){var b=a.target;if(P&&f(a)<2){if(!C.move)return;if(Q.length<2){var c=k(b);Q=[{x:c.left+b.offsetWidth/2,y:c.top+b.offsetHeight/2},C.move[0]],R=parseInt(i(Q[0],Q[1]),10)}var d=[Q[0],C.move[0]],e=this._getAngleDiff(d),g={type:"",originEvent:a,rotation:e,direction:e>0?"right":"left",fingersCount:f(a)};m(a)?g.fingerStatus="move":(n(a)||"mouseout"===a.type)&&(g.fingerStatus="end",u(b,B.PINCH_END,g),l());var h=e>0?B.ROTATION_RIGHT:B.ROTATION_LEFT;u(b,h,g),u(b,B.ROTATION,g)}},swipe:function(a){var b=a.target;if(L&&C.move&&!(f(a)>1)){var c=Date.now(),d=c-D,g=e(C.start[0],C.move[0]),i={x:C.move[0].x-K.left,y:C.move[0].y-K.top},k=h(C.start[0],C.move[0]),l=j(k),o=d/1e3,p=10*(10-z.swipeFactor)*o*o,q={type:B.SWIPE,originEvent:a,position:i,direction:l,distance:g,distanceX:C.move[0].x-C.start[0].x,distanceY:C.move[0].y-C.start[0].y,angle:k,duration:d,fingersCount:f(a),factor:p};if(z.swipe){var r=function(){var a=B;switch(l){case"up":u(b,a.SWIPE_UP,q);break;case"down":u(b,a.SWIPE_DOWN,q);break;case"left":u(b,a.SWIPE_LEFT,q);break;case"right":u(b,a.SWIPE_RIGHT,q)}};H?m(a)?(q.fingerStatus=q.swipe="move",u(b,B.SWIPING,q),d>z.swipeTime&&d<z.swipeTime+50&&g>z.swipeMinDistance&&(r(),u(b,B.SWIPE,q,!1))):(n(a)||"mouseout"===a.type)&&(q.fingerStatus=q.swipe="end",u(b,B.SWIPE_END,q),z.swipeTime>d&&g>z.swipeMinDistance&&(r(),u(b,B.SWIPE,q,!1))):(q.fingerStatus=q.swipe="start",H=!0,u(b,B.SWIPE_START,q))}z.drag&&(J?m(a)?q.fingerStatus=q.swipe="move":n(a)&&(q.fingerStatus=q.swipe="end"):(q.fingerStatus=q.swipe="start",J=!0),u(b,B.DRAG,q))}},tap:function(a){var b=a.target;if(z.tap){var c=Date.now(),d=c-D,g=e(C.start[0],C.move?C.move[0]:C.start[0]);clearTimeout(M);var h=function(){if(U&&z.doubleTap&&D-T<z.maxDoubleTapInterval){var a=e(U,C.start[0]);if(16>a)return!0}return!1}();if(h)return u(b,B.DOUBLE_TAP,{type:B.DOUBLE_TAP,originEvent:a,position:C.start[0]}),void 0;if(z.tapMaxDistance<g)return;z.holdTime>d&&f(a)<=1&&(N=!0,T=c,U=C.start[0],u(b,B.TAP,{type:B.TAP,originEvent:a,fingersCount:f(a),position:C.start[0]}))}},hold:function(a){var b=a.target;z.hold&&(clearTimeout(M),M=setTimeout(function(){if(C.start){var c=e(C.start[0],C.move?C.move[0]:C.start[0]);z.tapMaxDistance<c||N||u(b,"hold",{type:"hold",originEvent:a,fingersCount:f(a),position:C.start[0]})}},z.holdTime))}},W=function(b){var c=b.target;switch(b.type){case"touchstart":case"mousedown":Q=[],L=!0,(!C.start||C.start.length<2)&&(C.start=d(b)),f(b)>=2&&(R=parseInt(i(C.start[0],C.start[1]),10)),D=Date.now(),E=b,K={};var e=c.getBoundingClientRect(),g=document.documentElement;K={top:e.top+(a.pageYOffset||g.scrollTop)-(g.clientTop||0),left:e.left+(a.pageXOffset||g.scrollLeft)-(g.clientLeft||0)},V.hold(b);break;case"touchmove":case"mousemove":if(!L||!C.start)return;C.move=d(b),f(b)>=2?V.pinch(b):P?V.rotateSingleFinger(b):V.swipe(b);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!L)return;G=b,I?V.pinch(b):P?V.rotateSingleFinger(b):H?V.swipe(b):V.tap(b),l(),R=0,S=0,b.touches&&1===b.touches.length&&(L=!0,P=!0)}},X=function(){function a(a){A||(a=r.getPCevts(a)),i.forEach(function(b){x(b,a,g,f[a])})}function c(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,f[a])})}var d,e,f,g,h=arguments;if(h.length<2||h>4)return console.error("unexpected arguments!");var i="string"===r.getType(h[0])?b.querySelectorAll(h[0]):h[0];if(i=i.length?Array.prototype.slice.call(i):[i],3===h.length&&"string"===r.getType(h[1]))return d=h[1].split(" "),e=h[2],d.forEach(function(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,e)})}),void 0;if(3!==h.length||"object"!==r.getType(h[1]))if(2!==h.length||"object"!==r.getType(h[1])){if(4===h.length&&"object"===r.getType(h[2]))return d=h[1].split(" "),e=h[3],d.forEach(function(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,e)})}),void 0;if(4===h.length){var j=i[0];return d=h[1].split(" "),g=h[2],e=h[3],d.forEach(function(a){A||(a=r.getPCevts(a)),x(j,a,g,e)}),void 0}}else{f=h[1];for(var k in f)c(k)}else{f=h[1],g=h[2];for(var l in f)a(l)}},Y=function(){var a,c,d=arguments;if(d.length<1||d.length>4)return console.error("unexpected arguments!");var e="string"===r.getType(d[0])?b.querySelectorAll(d[0]):d[0];if(e=e.length?Array.prototype.slice.call(e):[e],1===d.length||2===d.length)return e.forEach(function(b){a=d[1]?d[1].split(" "):Object.keys(b.listeners),a.length&&a.forEach(function(a){A||(a=r.getPCevts(a)),w(b,a),y(b,a)})}),void 0;if(3===d.length&&"function"===r.getType(d[2]))return c=d[2],e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),w(b,a,c)})}),void 0;if(3===d.length&&"string"===r.getType(d[2])){var f=d[2];return e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),y(b,a,f)})}),void 0}return 4===d.length?(c=d[3],e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),y(b,a,f,c)})}),void 0):void 0},Z=function(a,c,d){var e=arguments;A||(c=r.getPCevts(c));var f="string"===r.getType(e[0])?b.querySelectorAll(e[0]):e[0];f=f.length?Array.prototype.call(f):[f],f.forEach(function(a){u(a,c,d)})};o(),c.on=X,c.off=Y,c.bind=X,c.unbind=Y,c.live=X,c.die=Y,c.config=z,c.trigger=Z}(document,d),c.touch=d}),k("mbaas",function(a){var d=this,e=a.account={},g=new f("device","login","login"),h=new f("device","login","logout"),i=new f("authorization","login"),j=new f("authorization","loginout"),k=new f("authorization","getuserinfo"),l=new f("authorization","getstatus"),m=new f("device","login","isLogin"),n=new f("device","login","getAccountInfo");a.LOGIN_TYPE={WEIBO:"sinaweibo",QQ:"qqdenglu",KAIXIN:"kaixin",QQWEIBO:"qqweibo",RENREN:"renren"},e.login=function(a){a.mediaType?i(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a):g(a.onsuccess,function(e){"object"==typeof e&&1===e.error_code?a.onfail(b.STATUS.USER_CANCELED):d.error(c.LOGIN_ERROR,e,a)},a.scope?a.scope:"basic",a)},e.logout=function(a){a.mediaType?j(function(){a.onsuccess(b.STATUS.SUCCESS)},function(b){d.error(c.LOGIN_ERROR,b,a)},a):h(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a)},e.getStatus=function(a){a.mediaType?l(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a):m(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a)},e.getUserInfo=function(a){a.mediaType?k(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a):n(a.onsuccess,function(b){d.error(c.LOGIN_ERROR,b,a)},a)}}),k("mbaas",function(a){var d=this,e=a.face={};a.FR_ERROR={NETWORK_ERR:1,TIMEOUT_ERR:2,CANCEL_ERR:3,REGISTER_ERR:4,VERIFY_ERR:5,DETECT_FACE_ERR:6,AUTHORIZE_DEVICE_ERR:7,GET_DEVICE_LIST_ERR:8,CLECK_BLINK_ERR:9,SERVER_ERR:99,UNKNOWN_ERR:100},e.register=function(a,e){j("facerecognition",function(f){var g=new f.FaceRecognition(a);g.register(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.FR_ERROR,a,e)})})},e.verify=function(a,e){j("facerecognition",function(f){var g=new f.FaceRecognition(a);g.verify(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.FR_ERROR,a,e)})})},e.checkBlink=function(a,e){j("facerecognition",function(f){var g=new f.FaceRecognition(a);g.check_blink(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.FR_ERROR,a,e)})})},e.authorizeDevice=function(a,e){j("facerecognition",function(f){var g=new f.FaceRecognition(a);g.authorize_device(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.FR_ERROR,a,e)})})},e.listDevice=function(a,b){j("facerecognition",function(e){var f=new e.FaceRecognition(a);f.get_device_list(function(){b.onsuccess.apply(this,arguments)},function(a){d.error(c.FR_ERROR,a,b)})})}}),k("mbaas",function(a){var d=this,e=a.map={},g=new f("map","start"),h=new f("map","stop"),i=new f("map","locationRequest"),j=new f("map","poiRequest"),k=function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript",d.src=a,d.onload=d.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||("function"==typeof b&&b(),d.onload=d.onreadystatechange=null,c&&d.parentNode&&c.removeChild(d))},c.insertBefore(d,c.firstChild)};e.Convertor={},e.Convertor.translate=function(a,b,c){var d="cbk_"+Math.round(1e4*Math.random()),f="http://api.map.baidu.com/ag/coord/convert?from="+b+"&to=4&x="+a.lng+"&y="+a.lat+"&callback=clouda.mbaas.map.Convertor."+d;k(f),e.Convertor[d]=function(a){delete e.Convertor[d];var b=new BMap.Point(a.x,a.y);"function"==typeof c&&c(b)}},e.start=function(a){g(function(b){var c=new BMap.Point(b.longitude,b.latitude);e.Convertor.translate(c,2,function(b){a.onsuccess(b)})},function(b){d.error(c.MAP_ERROR,b,a)},a)},e.stop=function(a){h(function(){a.onsuccess(b.STATUS.SUCCESS)},function(b){d.error(c.MAP_ERROR,b,a)},a)},e.locationRequest=function(a){i(function(b){var c=new BMap.Point(b.longitude,b.latitude);e.Convertor.translate(c,2,function(b){a.onsuccess(b)})},function(b){d.error(c.MAP_ERROR,b,a)},a)},e.poiRequest=function(a){j(function(b){a.onsuccess(b)},function(b){d.error(c.MAP_ERROR,b,a)},a)}}),k("mbaas",function(a){return a.share={},a}),k("mbaas",function(a){var d=this,e=a.pcs={};a.VIDEO_STREAM={P360:"MP4_360P",P480:"MP4_480P"},a.MEDIA_TYPE={IMG:"image",AUD:"audio",VID:"video",DOC:"doc"},a.CODEC_TYPE={M320:"M3U8_320_240",M480224:"M3U8_480_224",M480360:"M3U8_480_360",M640:"M3U8_640_480",M854:"M3U8_854_480"};var f,g="";return e.init=function(a,b){return a?(j("pcs",function(e){e.initPCS(a,function(){b.onsuccess(e),f=e},function(a){d.error(c.PCS_ERROR,a,b)})}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.mkdir=function(a,e){return f?(f.makeDir(g+a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.getQuota=function(a){return f?(f.quota(function(b){a.onsuccess(b)},function(b){d.error(c.PCS_ERROR,b,a)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,a),void 0)},e.uploadFile=function(a,b,e){return f?(f.uploadFile({source:a,target:g+b},function(a){e.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,e)},function(a){e.onprogress(a)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.deleteFiles=function(a,b){return f&&Array.isArray(a)?(f.deleteFiles(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.getMeta=function(a,b){return f?(f.meta(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.getList=function(a,b){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0;var e={path:a};e.by=b.by?b.by:"time",e.order=b.order?b.order:"asc",f.list(e,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)})},e.getStreamingURL=function(b,e,h){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,h),void 0;"string"!=typeof e&&(e=a.VIDEO_STREAM.P360);var i={source:g+b,type:e};f.getStreamingURL(i,function(a){h.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,h)})},e.search=function(a,b,e,h){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,h),void 0;var i={path:g+a,key:b,recursive:e};f.search(i,function(a){h.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,h)})},e.thumbnail=function(a,b){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0;var e={path:g+a,quality:b.quality,width:b.width,height:b.height};f.thumbnail(e,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)})},e.move=function(a,e){if(!f||!Array.isArray(a))return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0;for(var h=0,i=a.length;i>h;h++)a[h].from=g+a[h].from,a[h].to=g+a[h].to;f.move(a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)})},e.rename=function(a,e){if(!f||!Array.isArray(a))return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0;for(var h=0,i=a.length;i>h;h++)a[h].oldName=g+a[h].oldName,a[h].newName=g+a[h].newName;f.rename(a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)})},e.copy=function(a,e){if(!f||!Array.isArray(a))return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0;for(var h=0,i=a.length;i>h;h++)a[h].from=g+a[h].from,a[h].to=g+a[h].to;f.copy(a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)})},e.getListByCategory=function(a,b){return f?(f.streamWithSpecificMediaType({type:a},function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.createFileLink=function(a,e){return f?(f.createFileLink(g+a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.deleteFileLink=function(a,e){return f?(f.deleteFileLink(g+a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.cloudMatch=function(a,b,e){return f?(f.cloudMatch({localPath:a,serverPath:b},function(a){e.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,e)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.cloudMatchAndUploadFile=function(a,b,e){return f?(f.cloudMatchAndUploadFile({localPath:a,serverPath:b},function(a){e.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,e)},function(a){e.onprogress(a)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.listRecycle=function(a){return f?(f.listRecycle({},function(b){a.onsuccess(b)},function(b){d.error(c.PCS_ERROR,b,a)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,a),void 0)},e.restore=function(a,b){return f&&Array.isArray(a)?(f.restoreRecycle(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.cleanRecycle=function(a){return f?(f.cleanRecycle(function(){a.onsuccess(b.STATUS.SUCCESS)},function(b){d.error(c.PCS_ERROR,b,a)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,a),void 0)},e.downloadFile=function(a,b,e){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0;var g,h={source:a,target:b};Array.isArray(a)?(g=f.batchDownloadFiles,delete h.source,h.sourceList=a):e.codecType?(g=f.downloadFileAsSpecificCodecType,h.type=e.codecType):g=e.asStream?f.downloadFileFromStream:f.downloadFile,g(h,function(a){e.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,e)},function(a){e.onprogress(a)})},e.cloudDownload=function(a,e,g){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,g),void 0;var h={sourceUrl:a,serverPath:e,rateLimit:g.rateLimit?g.rateLimit:0,timeOut:g.timeout?g.timeout:0};f.cloudDownload(h,function(){g.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,g)})},e.cloudDownloadTaskList=function(a){if(!f)return d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,a),void 0;a.asc="desc"===a.order?0:1;var b={start:a.start?a.start:0,limit:a.limit?a.limit:0,asc:a.asc,status:a.status?a.status:-1,needTaskInfo:a.needTaskInfo?a.needTaskInfo:!0};f.cloudDownloadTaskList(b,function(b){a.onsuccess(b)},function(b){d.error(c.PCS_ERROR,b,a)})},e.queryCloudDownloadTaskStatus=function(a,b){return f&&Array.isArray(a)?(f.queryCloudDownloadTaskStatus(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.queryCloudDownloadTaskProgress=function(a,b){return f&&Array.isArray(a)?(f.queryCloudDownloadTaskProgress(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},e.cancelCloudDownload=function(a,e){return f&&Array.isArray(filesukarr)?(f.cancelCloudDownload(a,function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.PCS_ERROR,a,e)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,e),void 0)},e.diff=function(a,b){return f?(f.diff(a,function(a){b.onsuccess(a)},function(a){d.error(c.PCS_ERROR,a,b)}),void 0):(d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b),void 0)},a}),k("mbaas",function(a){var d=this,e=a.mediaplayer={};e.play=function(a,e){j("videoplayer",function(f){var g=new f.VideoPlayerOptions(a);f.play(function(){e.onsuccess(b.STATUS.SUCCESS)},function(a){d.error(c.CPS_ERROR,a,e)},g)})}}),k("mbaas",function(a){var d=this,e=a.push={},g=new f("device","push","bind"),h=new f("device","push","unbind"),i=new f("device","push","checkBindState"),j=new f("device","push","setTag"),k=new f("device","push","deleteTag"),l=new f("device","push","listTag"),m=new f("device","push","pushMsg");e.register=function(a){g(function(b){"string"==typeof b&&(b=JSON.parse(b)),b.uid?a.onsuccess(b):d.error(c.PUSH_GET_ERR,c.UNKNOW_CALLBACK,a)},function(b){d.error(c.PUSH_GET_ERR,b,a)},d.ak,a)},e.unregister=function(a){h(function(){a.onsuccess(b.STATUS.SUCCESS)},function(b){d.error(c.PUSH_ERR,b,a)},d.ak,a)},e.checkStatus=function(a){i(function(b){a.onsuccess(b)},function(b){d.error(c.PUSH_ERR,b,a)},d.ak,a)},e.setTag=function(a,b){j(function(a){b.onsuccess(a)},function(a){d.error(c.PUSH_ERR,a,b)},a,b)},e.removeTag=function(a,b){k(function(a){b.onsuccess(a)},function(a){d.error(c.PUSH_ERR,a,b)},a,b)},e.listTag=function(a){l(function(b){a.onsuccess(b)},function(b){d.error(c.PUSH_ERR,b,a)},a)},e.pushMsg=function(a){m(a.onsuccess,function(b){d.error(c.PUSH_ERR,b,a)},a.uid,a.channelId,{title:a.title,description:a.description})}}),k("mbaas",function(a){var d=this,e=a.vtt={},g=a.tts={},h=new f("voice","tts","say"),i=new f("voice","vtt","showDialog");a.VTT_SPEECHMODE={SEARCH:0,INPUT:1};var j={};e.init=function(a,b){j.ak=a,j.sk=b},e.showDialog=function(c){return b.RUNTIME===b.RUNTIMES.KUANG?(c.speechMode=c.speechMode?""+c.speechMode:"0",BLightApp.launchSeniorVoiceRecognition(JSON.stringify({config:{uuid:"uuid-uuid",enablePower:"true",key:j.ak,secKey:j.sk,speechMode:c.speechMode,filename:"2000000.wav"}}),"("+c.onsuccess.toString()+")","("+c.onfail.toString()+")"),!1):(c.speechMode||(c.speechMode=a.VTT_SPEECHMODE.SEARCH),c.dialogTheme||(c.dialogTheme=1),i(c.onsuccess,c.onfail,c),void 0)},g.TYPE_DICT_US="dict_en",g.TYPE_DICT_UK="dict_uk",g.TYPE_DICT_ZH="trans_zh",g.say=function(a,b){h(function(a){"string"==typeof a?b.onsuccess.apply(this,arguments):d.error(c.vtt_ERR,c.UNKNOW_CALLBACK,b)},function(a){d.error(c.BTY_ERROR,a,b)},a,b.type)}})}}(window);