!function(a){if("object"==typeof a){"undefined"==typeof a.clouda&&(a.clouda={});var b=a.clouda;b.lightapp=function(a){b.lightapp.ak=a},b.STATUS={SUCCESS:0,SYSTEM_FAILURE:-3,USER_CANCELED:-2};var c={UNKNOW_CALLBACK:-1,UNKNOW_INPUT:-1,AK_UNDEFINED:-4,RT_GETERROR:5,EXEC_ERROR:-5,NOT_FINISH:-99,ACC_GET_ERR:6,LOC_GET_ERR:7,CAP_GET_ERR:8,CONTACT_FIND_ERR:9,GLO_ERR:10,REACH_ERR:11,MEDIA_ERR:12,CPS_ERROR:13,BTY_ERROR:14,QR_ERR:15,FS_ERR:16,BTY_ERR:17},d={0:"成功","-1":"接口返回不符合预期","-2":"用户取消","-3":"接口的运行环境不存在。","-4":"错误，您需要在调用api前设置ak。 clouda.lightapp(your_ak_here);","-5":"执行接口出错。","-99":"功能开发中。",5:"接口的运行环境准备中出错。",6:"accelerometer 接口返回错误",7:"geolocation 接口返回错误"},e=function(a,b,c){0>a&&(b=a),"object"==typeof c&&"function"==typeof c.onfail&&c.onfail(b);try{throw new Error}catch(e){var f=e.stack.split("\n");console.error(d[a]+(b?" app错误号"+b:"")+f[2].replace(/\s*/,""))}},f=function(a,b,c){return this.module=a,this.submodule=b,this.func=c,function(a){return function(){a.exec.apply(a,arguments)}}(this)};f.prototype.exec=function(){var a=arguments,d=this;j(this.module,function(e){try{d.func?e[d.submodule][d.func].apply(d,a):e[d.submodule].apply(d,a)}catch(f){var g;g=e?c.EXEC_ERROR:b.STATUS.SYSTEM_FAILURE,a.length&&"object"==typeof a[a.length-1]&&"function"==typeof a[a.length-1].onfail&&a[a.length-1].onfail(g),d.error(g)}})},b.lightapp.error=f.prototype.error=e;var g=[];document.addEventListener("runtimeready",function(){if(b.STATUS.SUCCESS=1,g.length){for(var a=0,c=g.length;c>a;a++)j.apply(void 0,g[a]);delete g}});var h=0;setTimeout(function(){if(h=100,g.length){for(var a=0,b=g.length;b>a;a++)j.apply(void 0,g[a]);delete g}},6e3);var i={},j=function(a,d){if(!b.lightapp.ak)return this.error(c.AK_UNDEFINED),console.error("错误，'"+a+"' clouda.lightapp(your_ak_here);"),!1;if(!b.STATUS.SUCCESS&&100>h)return g.push([a,d]),void 0;var e=this;if(!a)return!1;if("undefined"!=typeof i[a])return d(i[a]);try{nuwa.pm.bindAk(b.lightapp.ak),nuwa.pm.absorb(a,function(b){b.on("error",function(){e.error(c.RT_GETERROR),d(null)}),b.on("progress",function(){}),b.on("complete",function(){i[a]=nuwa.require(a),d(i[a])})})}catch(f){d(null)}return!1},k=function(a,c){var d=b[a];c.call(b.lightapp,d,b)};b.device={},b.mbaas={},k("device",function(a){var b=this,d=a.accelerometer={},e=new f("device","accelerometer","getCurrentAcceleration"),g=(new f("device","accelerometer","watchAcceleration"),new f("device","accelerometer","clearWatch"));d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.x&&"undefined"!=typeof d.y&&"undefined"!=typeof d.z?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)};var h;return d.startListen=function(a){j("device",function(d){h=d.accelerometer.watchAcceleration(function(){"object"==typeof obj&&"undefined"!=typeof obj.x&&"undefined"!=typeof obj.y&&"undefined"!=typeof obj.z?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)})},d.stopListen=function(){g(h)},d}),k("device",function(a){var b=this,d=a.battery={},e=new f("device","batteryStatus","start"),g=new f("device","batteryStatus","stop");return d.get=function(a){e(function(){a.onsuccess.apply(this,arguments),g(function(){},function(){})},function(d){b.error(c.BTY_ERR,d,a)},a)},d.startListen=function(a){e(a.onsuccess,function(d){b.error(c.BTY_ERR,d,a)},a)},d.stopListen=function(a){g(a.onsuccess,function(d){b.error(c.BTY_ERR,d,a)},a)},d}),k("device",function(a){var b=this,d=a.compass={},e=new f("device","compass","getCurrentHeading"),g=(new f("device","compass","watchHeading"),new f("device","compass","clearWatch"));d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.magneticHeading&&"undefined"!=typeof d.trueHeading?a.onsuccess.apply(this,arguments):b.error(c.CPS_ERROR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.CPS_ERROR,d,a)},a)};var h;return d.startListen=function(a){j("device",function(d){h=d.compass.watchHeading(function(){"object"==typeof obj&&"undefined"!=typeof obj.magneticHeading&&"undefined"!=typeof obj.trueHeading?a.onsuccess.apply(this,arguments):b.error(c.CPS_ERROR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.CPS_ERROR,d,a)})})},d.stopListen=function(){g(h)},d}),k("device",function(a){var b=this,d=a.connection={};d.ConnectionType={UNKNOWN:0,ETHERNET:1,WIFI:2,CELL_2G:3,CELL_3G:4,CELL_4G:5,CELL:6,NONE:7};var e=new f("device","network","getInfo");return d.startListen=function(a){e(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.REACH_ERR):b.error(c.REACH_ERR)},a)},d.stopListen=function(a){b.error(c.NOT_FINISH,nativeErr,a)},a}),k("device",function(a){{var b=this,d=a.contact={};new f("device","contact","create"),new f("device","contact","find")}a.CONTACT_COLUMN={ID:"id",NAME:"name",NICKNAME:"nickname",PHONE:"phoneNumbers",EMAIL:"emails",ADDRESS:"addresses",ORGANIZATION:"organizations",BIRTHDAY:"birthday",PHOTO:"photos",CATEGORY:"categories",IM:"ims",URL:"urls",NOTE:"note"},d.find=function(a,d){j("device",function(e){e.contact.find(a,function(a){Array.isArray(a)?d.onsuccess.apply(this,arguments):b.error(c.CONTACT_FIND_ERR,c.UNKNOW_CALLBACK,d)},function(a){b.error(c.CONTACT_FIND_ERR,a,d)},d)})},d.insert=function(d,e){j("device",function(f){var g=f.contact.create();for(var h in d)h===a.CONTACT_COLUMN.NAME?g.displayName=d[a.CONTACT_COLUMN.NAME]:g[h]=d[h];g.save(function(){e.onsuccess.apply(this,arguments)},function(a){b.error(c.CONTACT_FIND_ERR,a,e)})})},d.update=function(d,e,f){j("device",function(g){var h={multiple:!1,filter:d};g.contact.find([a.CONTACT_COLUMN.ID],function(a){if(a&&a[0]){for(var d in e)a[0][d]=e[d];a[0].save(function(){f.onsuccess.apply(this,arguments)},function(a){b.error(c.CONTACT_FIND_ERR,a,f)})}else b.error(c.CONTACT_FIND_ERR,c.UNKNOW_CALLBACK,f)},function(a){b.error(c.CONTACT_FIND_ERR,a,f)},h)})},d.remove=function(d,e){j("device",function(f){var g={multiple:!1,filter:d};f.contact.find([a.CONTACT_COLUMN.ID],function(a){a&&a[0]?a[0].remove(function(){e.onsuccess.apply(this,arguments)},function(a){b.error(c.CONTACT_FIND_ERR,a,e)}):b.error(c.CONTACT_FIND_ERR,c.UNKNOW_CALLBACK,e)},function(a){b.error(c.CONTACT_FIND_ERR,a,e)},g)})},d.count=function(a){b.error(c.NOT_FINISH,c.NOT_FINISH,a)},d.getCursor=function(a,d){b.error(c.NOT_FINISH,c.NOT_FINISH,d)}}),k("device",function(a){var b=this,d=a.fs={},e=function(){return"/sdcard/Baidu/"+b.ak},f=function(a){return a.substring(a.lastIndexOf("/")+1)},g=null;return d.postFile=function(a,d,e){j("filetransfer",function(h){h=h.fileTransfer,null===g&&(g=new h.FileTransfer,e.onprogress&&(g.onprogress=e.onprogress));var i=new h.FileUploadOptions;i.fileKey=e.uploadKey,i.fileName=f(a),g.upload(a,d,function(){e.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,e)},i,e)})},d.downloadFile=function(a,d,f){j("filetransfer",function(h){h=h.fileTransfer,null===g&&(g=new h.FileTransfer,f.onprogress&&(g.onprogress=f.onprogress)),g.download(a,e()+"/"+d,function(){f.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,f)},f)})},d.abort=function(){null===g?b.error(c.FS_ERR,err,options):g.abort()},d.remove=function(a,d){j("device",function(e){var g=new e.fs.fileEntry(f(a),a);g.remove(function(){d.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,d)},d)})},d.empty=function(a){j("device",function(d){var g=e(),h=new d.fs.DirectoryEntry(f(g),g);h.removeRecursively(function(){a.onsuccess.apply(this,arguments)},function(d){b.error(c.FS_ERR,d,a)},a)})},d.getCount=function(a){j("device",function(d){var g=e(),h=new d.fs.DirectoryEntry(f(g),g),i=h.createReader();i.readEntries(function(){a.onsuccess.apply(this,arguments)},function(d){b.error(c.FS_ERR,d,a)},a)})},d.getInfo=function(a,d){j("device",function(e){var g=new e.fs.fileEntry(f(a),a);g.getMetadata(function(){d.onsuccess.apply(this,arguments)},function(a){b.error(c.FS_ERR,a,d)})},d)},d.getInfoByOffset=function(a,d){b.error(c.NOT_FINISH,c.NOT_FINISH,d)},a}),k("device",function(a){var b=this,d=a.geolocation={},e=new f("device","geolocation","getCurrentPosition"),g=(new f("device","geolocation","watchPosition"),new f("device","geolocation","clearWatch"));d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.latitude&&"undefined"!=typeof d.longitude?a.onsuccess.apply(this,arguments):b.error(c.LOC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.LOC_GET_ERR,d,a)},a)};var h;return d.startListen=function(){j("device",function(a){h=a.geolocation.watchPosition(function(){"object"==typeof obj&&"undefined"!=typeof obj.latitude&&"undefined"!=typeof obj.longitude?options.onsuccess.apply(this,arguments):b.error(c.LOC_GET_ERR,c.UNKNOW_CALLBACK,options)},function(a){b.error(c.LOC_GET_ERR,a,options)},options)})},d.stopListen=function(){g(h)},a}),k("device",function(a){for(var b=this,d=a.globalization={},e=["dateToString","getCurrencyPattern","getDateNames","getDatePattern","getFirstDayOfWeek","getLocaleName","getNumberPattern","getPreferredLanguage","isDayLightSavingsTime","numberToString","stringToDate","stringToNumber"],g={},h=0,i=e.length;i>h;h++)g[e[h]]=new f("device","globalization",e[h]);return d.getPreferredLanguage=function(a){g.getPreferredLanguage(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getLocaleName=function(a){g.getLocaleName(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.dateToString=function(a,d){g.dateToString(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.stringToDate=function(a,d){g.stringToDate(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getDatePattern=function(a){g.getDatePattern(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getDateNames=function(a){g.getDateNames(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.isDayLightSavingsTime=function(a,d){g.isDayLightSavingsTime(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getFirstDayOfWeek=function(a){g.getFirstDayOfWeek(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.numberToString=function(a,d){g.numberToString(d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.stringToNumber=function(a,d){g.stringToNumber(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},d.getNumberPattern=function(a){g.getNumberPattern(a.onsuccess,function(){a&&"function"==typeof a.onfail?a.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},a)},d.getCurrencyPattern=function(a,d){g.getCurrencyPattern(a,d.onsuccess,function(){d&&"function"==typeof d.onfail?d.onfail(c.GLO_ERR):b.error(c.GLO_ERR)},d)},a}),k("device",function(a){var b=this,d=a.gyro={},e=new f("device","deviceOrientation","getCurrentDeviceOrientation"),g=new f("device","deviceOrientation","clearWatch");d.get=function(a){e(function(d){"object"==typeof d&&"undefined"!=typeof d.alpha&&"undefined"!=typeof d.beta&&"undefined"!=typeof d.gamma?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)};var h;return d.startListen=function(a){j("device",function(d){h=d.deviceOrientation.watchDeviceOrientation(function(){"object"==typeof obj&&"undefined"!=typeof obj.alpha&&"undefined"!=typeof obj.beta&&"undefined"!=typeof obj.gamma?a.onsuccess.apply(this,arguments):b.error(c.ACC_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.ACC_GET_ERR,d,a)},a)})},d.stopListen=function(){g(h)},d}),k("device",function(b){var d=this,e=b.localStorage={};e.set=function(){a.localStorage.setItem.apply(this,arguments)},e.get=function(){a.localStorage.getItem.apply(this,arguments)},e.remove=function(){a.localStorage.removeItem.apply(this,arguments)},e.count=function(b){"function"==typeof b.onsuccess?b.onsuccess(a.localStorage.length):d.error(c.UNKNOW_INPUT,c.UNKNOW_INPUT,b)},e.clean=function(){a.localStorage.clear()}}),k("device",function(a){var d=this,e=a.media={};a.MEDIA_DESTINATION={},a.MEDIA_ENCODEING={},a.MEDIA_TYPE={},a.MEDIA_SOURCE={},a.MEDIA_DIRECTION={},a.MEDIA_DESTINATION.DATA_URL=0,a.MEDIA_DESTINATION.FILE_URI=1,a.MEDIA_DESTINATION.NATIVE_URI=2,a.MEDIA_ENCODEING.JPEG=0,a.MEDIA_ENCODEING.PNG=1,a.MEDIA_TYPE.PICTURE=0,a.MEDIA_TYPE.VIDEO=1,a.MEDIA_TYPE.ALLMEDIA=2,a.MEDIA_TYPE.AUDIO=3,a.MEDIA_SOURCE.PHOTOLIBRARY=0,a.MEDIA_SOURCE.CAMERA=1,a.MEDIA_DIRECTION.BACK=0,a.MEDIA_DIRECTION.FRONT=1;var g=(new f("device","camera","getPicture"),new f("device","capture","captureAudio")),h=new f("device","capture","captureImage"),i=new f("device","capture","captureVideo");return e.captureMedia=function(a){var e;e=a.mediaType==b.device.MEDIA_TYPE.VIDEO?i:a.mediaType==b.device.MEDIA_TYPE.AUDIO?g:h,e(function(b){b&&"object"==typeof b?a.onsuccess.apply(this,arguments):d.error(c.MEDIA_ERR,c.UNKNOW_CALLBACK,a)},a.onsuccess,function(b){d.error(c.MEDIA_ERR,b,a)},a)},a}),k("device",function(a){var b=a.notification={},c=new f("device","notification","alert"),d=new f("device","notification","confirm"),e=new f("device","notification","prompt"),g=new f("device","notification","beep"),h=new f("device","notification","vibrate");return b.alert=function(a,b){return"object"==typeof b?c(a,b.onsuccess,b.title,b.buttonName,b):c(a)},b.confirm=function(a,b){return"object"==typeof b?d.call(this,a,b.onsuccess,b.title,b.buttonLabels,b):d(a)},b.beep=g,b.vibrate=h,b.prompt=function(a,b){return"object"==typeof b?e(a,b.onsuccess,b.title,b.buttonLabels,b.defaultText,b):e(a)},a}),k("device",function(a){a.sqlite={};return a}),k("touch",function(b,c){var d=d||{};!function(b,c){"use strict";function d(a){if(A){for(var b=[],c=null,d=0,e=a.touches.length;e>d;d++)c=a.touches[d],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]}function e(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}function f(a){return a.touches?a.touches.length:1}function g(a,b){if(a.length>=2&&b.length>=2){var c=e(a[1],a[0]),d=e(b[1],b[0]);return d/c}return 1}function h(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function i(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c}function j(a){var b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(var c in b)if(b[c])return c;return null}function k(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}}function l(){E=F=G=null,N=L=H=I=!1,J=!1,C={},P=!1}function m(a){return"touchmove"===a.type||"mousemove"===a.type}function n(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type}function o(){var a=A?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout";X(b,"DOMContentLoaded",function(){var c=b.body;X(c,a,W)})}var p=function(){var b=a.navigator,c=b.userAgent,d=c.match(/(Android)[\s\/]+([\d\.]+)/),e=c.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),f=c.match(/(Windows\s+Phone)\s([\d\.]+)/),g=/WebKit\/[\d.]+/i.test(c),h=e?b.standalone?g:/Safari/i.test(c)&&!/CriOS/i.test(c)&&!/MQQBrowser/i.test(c):!1,i={};return d&&(i.android=!0,i.version=d[2]),e&&(i.ios=!0,i.version=e[2].replace(/_/g,"."),i.ios7=/^7/.test(i.version),"iPad"===e[1]?i.ipad=!0:"iPhone"===e[1]?(i.iphone=!0,i.iphone5=568==screen.height):"iPod"===e[1]&&(i.ipod=!0)),f&&(i.wp=!0,i.version=f[2],i.wp8=/^8/.test(i.version)),g&&(i.webkit=!0),h&&(i.safari=!0),i}(),q={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},r={getType:function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},getSelector:function(a){if(a.id)return"#"+a.id;if(a.className){var b=a.className.split(/\s+/);return"."+b.join(".")}return a.tagName.toLowerCase()},matchSelector:function(a,b){return a.webkitMatchesSelector(b)},getEventListeners:function(a){return a.listeners},getPCevts:function(a){return q[a]||a},forceReflow:function(){var a=document.getElementById("domTreeOp");a||(a=document.createElement("div"),a.id="domTreeOp",document.body.appendChild(a));var b=a.parentNode,c=a.nextSibling;b.removeChild(a),b.insertBefore(a,c)}},s=0,t=[],u=function(a,b,c){c=c||{};var d,e={bubbles:!0,cancelable:!0,detail:c};"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))},v=function(a,b,c){a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(c):a.listeners[b]=[c];var d=function(a){p.ios7&&r.forceReflow(),a.originEvent=a,a.startRotate=function(){P=!0};for(var b in a.detail)a[b]=a.detail[b];c.call(a.target,a)};c.proxy=c.proxy||{},c.proxy[b]?c.proxy[b].push(s++):c.proxy[b]=[s++],t.push(d),a.addEventListener&&a.addEventListener(b,d,!1)},w=function(a,b,c){if(c){var d=c.proxy[b];d&&d.length&&d.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,t[c],!1)})}else{var e=a.listeners[b];e&&e.length&&e.forEach(function(c){a.removeEventListener(b,c,!1)})}},x=function(a,b,c,d){var e=function(b){var e;b.originEvent=b,b.startRotate=function(){P=!0};for(var f in b.detail)b[f]=b.detail[f];var g=r.getSelector(a)+" "+c,h=r.matchSelector(b.target,g),i=r.matchSelector(b.target,g+" "+b.target.nodeName);if(!h&&i){for(p.ios7&&r.forceReflow(),e=b.target;!r.matchSelector(e,g);)e=e.parentNode;d.call(e,b)}else p.ios7&&r.forceReflow(),(h||i)&&d.call(b.target,b)};d.proxy=d.proxy||{},d.proxy[b]?d.proxy[b].push(s++):d.proxy[b]=[s++],t.push(e),a.listeners=a.listeners||{},a.listeners[b]?a.listeners[b].push(e):a.listeners[b]=[e],a.addEventListener&&a.addEventListener(b,e,!1)},y=function(a,b,c,d){if(d){var e=d.proxy[b];e.length&&e.forEach(function(c){a.removeEventListener&&a.removeEventListener(b,t[c],!1)})}else{var f=a.listeners[b];f.forEach(function(c){a.removeEventListener(b,c,!1)})}},z={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},A="ontouchstart"in a,B={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},C={start:null,move:null,end:null},D=0,E=null,F=null,G=null,H=!1,I=!1,J=!1,K={},L=!1,M=null,N=!1,O=1,P=!1,Q=[],R=0,S=0,T=0,U=null,V={_getAngleDiff:function(a){for(var b=parseInt(R-i(a[0],a[1]),10),c=0;Math.abs(b-S)>90&&c++<50;)0>S?b-=180:b+=180;return S=parseInt(b,10)},pinch:function(a){var b=a.target;if(z.pinch){if(!L)return;if(f(a)<2&&!n(a))return;var c=g(C.start,C.move),d=this._getAngleDiff(C.move),e={type:"",originEvent:a,scale:c,rotation:d,direction:d>0?"right":"left",fingersCount:f(a)};if(I?m(a)?e.fingerStatus="move":n(a)&&(e.fingerStatus="end",u(b,B.PINCH_END,e),l()):(I=!0,e.fingerStatus="start",u(b,B.PINCH_START,e)),u(b,B.PINCH,e),Math.abs(1-c)>z.minScaleRate){var h=_utils.deepCopy(e),i=1e-11;c>O?(O=c-i,u(b,B.PINCH_OUT,h,!1)):O>c&&(O=c+i,u(b,B.PINCH_IN,h,!1)),n(a)&&(O=1)}if(Math.abs(d)>z.minRotationAngle){var j,k=_utils.deepCopy(e);j=d>0?B.ROTATION_RIGHT:B.ROTATION_LEFT,u(b,j,k,!1),u(b,B.ROTATION,e)}}},rotateSingleFinger:function(a){var b=a.target;if(P&&f(a)<2){if(!C.move)return;if(Q.length<2){var c=k(b);Q=[{x:c.left+b.offsetWidth/2,y:c.top+b.offsetHeight/2},C.move[0]],R=parseInt(i(Q[0],Q[1]),10)}var d=[Q[0],C.move[0]],e=this._getAngleDiff(d),g={type:"",originEvent:a,rotation:e,direction:e>0?"right":"left",fingersCount:f(a)};m(a)?g.fingerStatus="move":(n(a)||"mouseout"===a.type)&&(g.fingerStatus="end",u(b,B.PINCH_END,g),l());var h=e>0?B.ROTATION_RIGHT:B.ROTATION_LEFT;u(b,h,g),u(b,B.ROTATION,g)}},swipe:function(a){var b=a.target;if(L&&C.move&&!(f(a)>1)){var c=Date.now(),d=c-D,g=e(C.start[0],C.move[0]),i={x:C.move[0].x-K.left,y:C.move[0].y-K.top},k=h(C.start[0],C.move[0]),l=j(k),o=d/1e3,p=10*(10-z.swipeFactor)*o*o,q={type:B.SWIPE,originEvent:a,position:i,direction:l,distance:g,distanceX:C.move[0].x-C.start[0].x,distanceY:C.move[0].y-C.start[0].y,angle:k,duration:d,fingersCount:f(a),factor:p};if(z.swipe){var r=function(){var a=B;switch(l){case"up":u(b,a.SWIPE_UP,q);break;case"down":u(b,a.SWIPE_DOWN,q);break;case"left":u(b,a.SWIPE_LEFT,q);break;case"right":u(b,a.SWIPE_RIGHT,q)}};H?m(a)?(q.fingerStatus=q.swipe="move",u(b,B.SWIPING,q),d>z.swipeTime&&d<z.swipeTime+50&&g>z.swipeMinDistance&&(r(),u(b,B.SWIPE,q,!1))):(n(a)||"mouseout"===a.type)&&(q.fingerStatus=q.swipe="end",u(b,B.SWIPE_END,q),z.swipeTime>d&&g>z.swipeMinDistance&&(r(),u(b,B.SWIPE,q,!1))):(q.fingerStatus=q.swipe="start",H=!0,u(b,B.SWIPE_START,q))}z.drag&&(J?m(a)?q.fingerStatus=q.swipe="move":n(a)&&(q.fingerStatus=q.swipe="end"):(q.fingerStatus=q.swipe="start",J=!0),u(b,B.DRAG,q))}},tap:function(a){var b=a.target;if(z.tap){var c=Date.now(),d=c-D,g=e(C.start[0],C.move?C.move[0]:C.start[0]);clearTimeout(M);var h=function(){if(U&&z.doubleTap&&D-T<z.maxDoubleTapInterval){var a=e(U,C.start[0]);if(16>a)return!0}return!1}();if(h)return u(b,B.DOUBLE_TAP,{type:B.DOUBLE_TAP,originEvent:a,position:C.start[0]}),void 0;if(z.tapMaxDistance<g)return;z.holdTime>d&&f(a)<=1&&(N=!0,T=c,U=C.start[0],u(b,B.TAP,{type:B.TAP,originEvent:a,fingersCount:f(a),position:C.start[0]}))}},hold:function(a){var b=a.target;z.hold&&(clearTimeout(M),M=setTimeout(function(){if(C.start){var c=e(C.start[0],C.move?C.move[0]:C.start[0]);z.tapMaxDistance<c||N||u(b,"hold",{type:"hold",originEvent:a,fingersCount:f(a),position:C.start[0]})}},z.holdTime))}},W=function(b){var c=b.target;switch(b.type){case"touchstart":case"mousedown":Q=[],L=!0,(!C.start||C.start.length<2)&&(C.start=d(b)),f(b)>=2&&(R=parseInt(i(C.start[0],C.start[1]),10)),D=Date.now(),E=b,K={};var e=c.getBoundingClientRect(),g=document.documentElement;K={top:e.top+(a.pageYOffset||g.scrollTop)-(g.clientTop||0),left:e.left+(a.pageXOffset||g.scrollLeft)-(g.clientLeft||0)},V.hold(b);break;case"touchmove":case"mousemove":if(!L||!C.start)return;C.move=d(b),f(b)>=2?V.pinch(b):P?V.rotateSingleFinger(b):V.swipe(b);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!L)return;G=b,I?V.pinch(b):P?V.rotateSingleFinger(b):H?V.swipe(b):V.tap(b),l(),R=0,S=0,b.touches&&1===b.touches.length&&(L=!0,P=!0)}},X=function(){function a(a){A||(a=r.getPCevts(a)),i.forEach(function(b){x(b,a,g,f[a])})}function c(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,f[a])})}var d,e,f,g,h=arguments;if(h.length<2||h>4)return console.error("unexpected arguments!");var i="string"===r.getType(h[0])?b.querySelectorAll(h[0]):h[0];if(i=i.length?Array.prototype.slice.call(i):[i],3===h.length&&"string"===r.getType(h[1]))return d=h[1].split(" "),e=h[2],d.forEach(function(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,e)})}),void 0;if(3!==h.length||"object"!==r.getType(h[1]))if(2!==h.length||"object"!==r.getType(h[1])){if(4===h.length&&"object"===r.getType(h[2]))return d=h[1].split(" "),e=h[3],d.forEach(function(a){A||(a=r.getPCevts(a)),i.forEach(function(b){v(b,a,e)})}),void 0;if(4===h.length){var j=i[0];return d=h[1].split(" "),g=h[2],e=h[3],d.forEach(function(a){A||(a=r.getPCevts(a)),x(j,a,g,e)}),void 0}}else{f=h[1];for(var k in f)c(k)}else{f=h[1],g=h[2];for(var l in f)a(l)}},Y=function(){var a,c,d=arguments;if(d.length<1||d.length>4)return console.error("unexpected arguments!");var e="string"===r.getType(d[0])?b.querySelectorAll(d[0]):d[0];if(e=e.length?Array.prototype.slice.call(e):[e],1===d.length||2===d.length)return e.forEach(function(b){a=d[1]?d[1].split(" "):Object.keys(b.listeners),a.length&&a.forEach(function(a){A||(a=r.getPCevts(a)),w(b,a),y(b,a)})}),void 0;if(3===d.length&&"function"===r.getType(d[2]))return c=d[2],e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),w(b,a,c)})}),void 0;if(3===d.length&&"string"===r.getType(d[2])){var f=d[2];return e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),y(b,a,f)})}),void 0}return 4===d.length?(c=d[3],e.forEach(function(b){a=d[1].split(" "),a.forEach(function(a){A||(a=r.getPCevts(a)),y(b,a,f,c)})}),void 0):void 0},Z=function(a,c){var d=arguments;A||(c=r.getPCevts(c));var e="string"===r.getType(d[0])?b.querySelectorAll(d[0]):d[0];e=e.length?Array.prototype.call(e):[e],e.forEach(function(a){u(a,c)})};o(),c.on=X,c.off=Y,c.bind=X,c.unbind=Y,c.live=X,c.die=Y,c.config=z,c.trigger=Z}(document,d),c.touch=d}),k("mbaas",function(a){a.face={}}),k("mbaas",function(a){a.map={}}),k("mbaas",function(a){return a.share={},a}),k("mbaas",function(a){a.player={}}),k("mbaas",function(a){{var b=this,d=a.push={},e=new f("device","push","bind"),g=new f("device","push","unbind");new f("device","push","checkBindState")}d.register=function(a){e(function(d){d=JSON.parse(d),d.uid?a.onsuccess(d):b.error(c.PUSH_GET_ERR,c.UNKNOW_CALLBACK,a)},function(d){b.error(c.PUSH_GET_ERR,d,a)},b.ak,a)},d.unregister=function(a){g(function(){a.onsuccess()},function(d){b.error(c.LOC_GET_ERR,d,a)},b.ak,a)},d.checkStatus=function(a){checkStatus(function(b){a.onsuccess(b)},function(d){b.error(c.LOC_GET_ERR,d,a)},b.ak,a)},d.onreceive=function(a){b.error(c.NOT_FINISH,c.NOT_FINISH,a)}}),k("mbaas",function(a){var b=this,d=a.qr={},e=new f("barcode","identifyQRcode"),g=new f("barcode","identifyBarcode"),h=new f("barcode","createQRcode");a.QR_TYPE={QRCODE:1,BARCODE:2},d.startCapture=function(d){d.type===a.QR_TYPE.BARCODE?g(function(a){"string"==typeof a?d.onsuccess.apply(this,arguments):b.error(c.QR_ERR,c.UNKNOW_CALLBACK,d)},function(a){b.error(c.QR_ERR,a,d)},d):e(function(a){"string"==typeof a?d.onsuccess.apply(this,arguments):b.error(c.QR_ERR,c.UNKNOW_CALLBACK,d)},function(a){b.error(c.QR_ERR,a,d)},d)};var i={};i.BLACK=0,i.COLOR=1,i.DYNAMIC=2;var j={};j.GIF="gif",j.PNG="png",d.generate=function(a,d){d.animate?(d.destType=j.GIF,d.type=i.DYNAMIC):d.destType=j.PNG,d.destType===j.PNG&&(d.type=d.mono===!1?i.COLOR:i.BLACK),h(function(a){"string"==typeof a?d.onsuccess.apply(this,arguments):b.error(c.QR_ERR,c.UNKNOW_CALLBACK,d)},function(a){b.error(c.QR_ERR,a,d)},d.type,a,d.backgroundPath,d.destType)}}),k("mbaas",function(a){a.screenshare={}}),k("mbaas",function(a){var d=this,e=a.vtt={},g=a.tts={},h=new f("voice","voiceRecognition"),i=new f("voice","tts","say");a.VTT_STATUS={},a.VTT_STATUS.START_RECORDING=0,a.VTT_STATUS.NONE=1,a.VTT_STATUS.SPEECH_START=2,a.VTT_STATUS.SPEECH_END=4,a.VTT_STATUS.FINISH=5,a.VTT_STATUS.PLAY_BEGINE_TONE_START=6,a.VTT_STATUS.PLAY_BEGINE_TONE_END=7,a.VTT_STATUS.PLAY_END_TONE_START=8,a.VTT_STATUS.PLAY_END_TONE_END=9,a.VTT_STATUS.UPDATE_RESULTS=10,a.VTT_STATUS.AUDIO_DATA=11,a.VTT_STATUS.USER_CANCELED=61440,a.VTT_STATUS.ERROR=65535,e.startCapture=function(e){e.voicePower&&h.enableVoicePower(successCallback,errorCallback,e.voicePower),e.speechMode&&h.setSpeechMode(successCallback,errorCallback,e.speechMode),h.startVoiceRecognition(function(){plg.voiceRecognition.setStatusChangeListener(function(c){c.status===a.VTT_STATUS.FINISH?e.onsuccess.apply(this,arguments):c.status===a.VTT_STATUS.USER_CANCELED?e.onfail.call(this,b.STATUS.USER_CANCELED):c.status===a.VTT_STATUS.ERROR&&e.onfail.call(this,c.status)},function(a){d.error(c.vtt_ERR,a.code,e)})},function(a){d.error(c.BTY_ERROR,a,e)},e)},e.speakFinish=function(a){h.speakFinish(function(){a.onsuccess.call(this,"OK")},function(b){d.error(c.BTY_ERROR,b,a)},a)},e.terminateCapture=function(a){h.stopVoiceRecognition(function(b){"string"==typeof b?a.onfail.apply(this,arguments):d.error(c.vtt_ERR,c.UNKNOW_CALLBACK,a)},function(b){d.error(c.BTY_ERROR,b,a)},a)},a.TTS_TYPE={TYPE_DICT_US:"dict_en",TYPE_DICT_UK:"dict_uk",TYPE_DICT_ZH:"trans_zh"},g.say=function(a,b){i(function(a){"string"==typeof a?b.onsuccess.apply(this,arguments):d.error(c.vtt_ERR,c.UNKNOW_CALLBACK,b)},function(a){d.error(c.BTY_ERROR,a,b)},a,b.type)}})}}(window);